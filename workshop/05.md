# Model validation

As well as field validators, we also have model validators which can access multiple fields at the
same time. This can be useful for things like conditional logic.

## mode = after

For example, an event needs a start and end time and the end time must be after the start time, so
we need to validate the end time with reference to the value given for the start time:

```python
from datetime import datetime
from pydantic import BaseModel, model_validator

class Event(BaseModel):
    name: str
    start: datetime
    end: datetime

    @model_validator(mode="after")
    def check_dates(self):
        if self.end <= self.start:
            raise ValueError("end time must be after start time")
        return self
```

Notice that this `model_validator` takes `self` instead of `cls` and `v` like `field_validator`
did. That's because it's now running after initialisation, not before, so we can now access values
via `self` the way we would normally. **Importantly, we must return `self`.**

## mode = before

However, when we delcare a `model_validator` with `mode="before"` it runs as a classmethod. Here's
an example showing all four combinations of model and field validators with mode before and after:

```python
from datetime import datetime
from pydantic import BaseModel, field_validator, model_validator

class Event(BaseModel):
    name: str
    start: datetime
    end: datetime

    @field_validator("start", mode="before")
    def fv_before(cls, v):
        print("field_validator before:", v)
        return v

    @field_validator("start", mode="after")
    def fv_after(cls, v):
        print("field_validator after:", v)
        return v

    @model_validator(mode="before")
    def mv_before(cls, data):
        print("model_validator before:", data)
        return data

    @model_validator(mode="after")
    def mv_after(self):
        print("model_validator after:", self)
        return self
```

Output:

```python
>>> Event(name="PyCon UK", start="2025-09-19T11:00", end="2025-09-19T12:00")
model_validator before: {'name': 'PyCon UK', 'start': '2025-09-19T11:00', 'end': '2025-09-19T12:00'}
field_validator before: 2025-09-19T11:00
field_validator after: 2025-09-19 11:00:00
model_validator after: name='PyCon UK' start=datetime.datetime(2025, 9, 19, 11, 0) end=datetime.datetime(2025, 9, 19, 12, 0)
```

Refer to the validators docs page for more info: https://docs.pydantic.dev/latest/concepts/validators/